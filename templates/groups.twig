{% extends "layout.twig" %}
{% block content %}

    <section id="brukerprofiler" class="brukerprofiler">
        {% if user.isAdmin or user.isProjectLeader %}
            <div class="container container_small">
                <button id="button" class="button" title="Ny bruker"
                        onclick="window.location.href='user_register.php';">
                    <img src="images/icon_legg_til_bruker.svg" width="30em"> Legg til ny bruker
                </button>
            </div>

            <!-- Denne har vi i tabellen??
            <div class="container container_small">
                <button id="button" class="button" title="Slett bruker">
                    <img src="images/icon_slett_bruker.svg" width="30em"> Slett bruker
                </button>
            </div>
             -->

            <div class="container container_small">
                <button id="button" class="button" title="Verifiser bruker">
                    <img src="images/icon_bruker_sjekk.svg" width="30em"> Verifiser bruker
                </button>
            </div>
        {% endif %}

        <!-- Denne har vi i tabellen??
        <div class="container container_small">
            <button id="button" class="button" title="Endre bruker">
                <img src="images/icon_endre_bruker.svg" width="30em"> Endre bruker
            </button>
        </div>
        <div class="container container_small">
            <button id="button" class="button" title="Oversikt">
                <img src="images/icon_people.png" width="50em"> Oversikt
            </button>
        </div>
        -->

        <section>
            <h5>Alle grupper</h5>
            {% if session.getFlashBag.has('header') %}
                {% for header in session.getFlashBag.get('header', []) %}
                    <h3>{{ header }}</h3>
                {% endfor %}
                {% for message in session.getFlashBag.get('message', []) %}
                    <p>{{ message }}</p>
                {% endfor %}
            {% endif %}
            <div class="text">
                <table class="table" id="table">
                    <tr>
                        <th>Gruppenavn</th>
                        <th>Gruppeleder</th>
                        <th>Admin eller ikke</th>

                        <!-- if admin\leder show this  -->
                        {% if user.isAdmin %}
                            <th>Se detaljer og rediger</th>
                        {% elseif user.getUserID == group.getGroupLeader%}
                            <th>Se detaljer og rediger</th>
                        {% endif %}
                    </tr>
                    {% for grp in groups %}
                        <tr>
                            <td>{{ grp.getGroupName}}</td>
                            <td>{{ grp.getGroupLeader}}</td>

                            {% if grp.isAdmin %}
                                <td>Administrator</td>
                            {% else %}
                                <td>Ingen stilling</td>
                            {% endif %}
                            <!-- if user is admin or user is username, edit -->
                            {% if user.isAdmin or user.userID == usr.getUserID %}
                                <td><a href="group_edit.php/?userid={{ usr.getUserID() }}">Rediger bruker</a></td>
                            {% endif %}
                            {% if user.isAdmin %}
                                <td><a href="user_delete.php/?userid={{ usr.getUserID() }}">Slett bruker</a></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </section>
    </section>
{% endblock %}